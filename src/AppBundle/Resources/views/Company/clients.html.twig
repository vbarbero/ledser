{% extends 'AppBundle::layout.html.twig' %}

{% block content %}

    <table class="row bg-dark text-light">
        <tr>
        <td class="col">id</td>
        <td class="col">Name</td>
        {% if drawee is defined %}
            <td class="col">rating</td>
        {% endif %}
        <td class="col">nominal</td>
        <td class="col">r.vivo</td>
        <td class="col">r.vencido</td>
        <td class="col">ingreso</td>
        <td class="col">honorarios</td>
        <td class="col">dias</td>
        <td class="col">tae</td>
        <td class="col">tae ledser</td>
        <td class="col">total</td>
        <td class="col">action</td>
        </tr>
    {% for company in proposalGroup %}
    <tr class="row {% if loop.index is odd %}bg-secondary{% endif %}">
        <td class="col">{{ loop.index }}</td>
        <td class="col"><a href="{{ url('list_files', {company: company.id}) }}"> {{ company.name }}</a> </td>
        {% if drawee is defined %}
            <td class="col">{{ company.rating }}</td>
        {% endif %}
        <td class="col">{{ company.nominal }}</td>
        <td class="col">{{ company.vivo }}</td>
        <td class="col">{{ company.muerto }}</td>
        <td class="col">{{ company.ingreso }}</td>
        <td class="col">{{ company.honorarios }}</td>
        <td class="col">{{ (company.dias / company.num) | number_format(2) }}</td>
        <td class="col">{{ (company.tae / company.num) | number_format(2) }}</td>
        <td class="col">{{ (company.taeLedser / company.num) | number_format(2) }}</td>
        <td class="col">{{ (company.total / company.num) | number_format(2) }}</td>
        <td class="col">
            <a href="{{ url('add_file', {company: company.id}) }}">Add file</a>
            <a href="{{ url('edit_company', {company: company.id}) }}">Edit</a>
            <a data-href="{{ url('delete_company', {company: company.id}) }}" class="delete">Delete</a>
        </td>
        </tr>
    {% endfor %}
    </table>
{% endblock %}

{% block javascript %}
    {{ parent() }}

    <script type="text/javascript">
        $(function () {
            $(".delete").on('click', function() {
                if (confirm('Are you sure you want to delete it?')) {
                    document.location = $(this).attr('data-href');
                    return true;
                } else {
                    return false;
                }
            });
        });
    </script>
{% endblock %}
